import{k as f,s as w,x as b,v as c}from"./framework.DZLrHpBd.js";const m=(e,{manual:n,ready:i=!0,refreshDeps:a=[],refreshDepsAction:s})=>{const u=w(!1);return b(()=>{!n&&e.options.refreshDeps!==!0&&(u.value=f(i))}),a instanceof Array?c([u,...a],([o])=>{o&&!n&&o&&(s?s():e.refresh())},{deep:!0,immediate:!1}):c(u,o=>{!n&&o&&(s?s():e.refresh())}),{name:"autoRunPlugin",onBefore:()=>{if(!f(i))return{stopNow:!0}}}};m.onInit=({ready:e=!0,manual:n})=>({loading:!n&&f(e)});function d(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}const v=!!(typeof window<"u"&&window.document&&window.document.createElement);function l(){return d()?document.visibilityState!=="hidden":!0}const t=[];function h(e){return t.push(e),function(){const i=t.indexOf(e);t.splice(i,1)}}if(d()){const e=()=>{if(l())for(let n=0;n<t.length;n++){const i=t[n];i()}};window.addEventListener("visibilitychange",e,!1)}function g(){return d()&&typeof navigator.onLine<"u"?navigator.onLine:!0}const r=[];function x(e){return r.push(e),function(){const i=r.indexOf(e);i>-1&&r.splice(i,1)}}if(v){const e=()=>{if(!(!l()||!g()))for(let n=0;n<r.length;n++){const i=r[n];i()}};window.addEventListener("visibilitychange",e,!1),window.addEventListener("focus",e,!1)}export{x as a,l as i,h as s,m as u};
