import{d as $,s as u,h as j,o as d,c as p,j as r,n as s,k as o,e as y,P as h,I as v,r as b,t as F,a1 as K,R,_ as D}from"./framework.CTHohdEj.js";import{_ as g}from"./index.vue_vue_type_style_index_0_lang.Dvt3Q--O.js";import{c as E}from"./create.BCteNkO5.js";import{a as H}from"./format.B9x3PRfW.js";import"./Uint8Array.s5ylH1oV.js";const M=["value","disabled","focus","maxlength","placeholder-class","placeholder","placeholder-style"],P={name:"Search",options:{virtualHost:!0}},U=$({...P,props:{disabled:{type:Boolean},searchIconSize:{},searchIcon:{default:"index-search"},searchIconColor:{default:"#909399"},placeholder:{default:"搜索内容"},placeholderColor:{},maxlength:{default:-1},actionText:{},color:{},focus:{type:Boolean},animation:{type:Boolean},clearabled:{type:Boolean,default:!0},showAction:{type:Boolean},actionStyle:{},inputStyle:{},shape:{default:"round"},bgColor:{default:"rgba(90, 128, 174, 0.05)"},height:{default:"32"},inputAlign:{default:"left"},borderColor:{default:"rgba(80, 100, 125, 0.05)"}},emits:["blur","search","clear","input","update:modelValue","change","focus","custom"],setup(C,{expose:_,emit:k}){const[S,l]=E("search"),n=C,t=k,a=u(""),c=u(!0),i=u(!1),B=()=>{},I=j(()=>!n.animation&&n.showAction),w=()=>{t("custom",a.value);try{uni.hideKeyboard()}catch{}},A=()=>{c.value=!0,n.animation&&n.showAction&&(i.value=!0),t("focus",a.value)},T=()=>{setTimeout(()=>{c.value=!1},100),i.value=!1,t("blur",a.value)},z=e=>{t("search",e.detail.value);try{uni.hideKeyboard()}catch{}},f=()=>{t("input",a.value),t("update:modelValue",a.value),t("change",a.value)},V=e=>{a.value=e.detail.value,f()},m=()=>{a.value="",R(()=>{t("clear")}),f()};return _({clear:m}),(e,N)=>(d(),p("div",{class:s(o(S))},[r("div",{class:s(o(l)("content")),style:h([{backgroundColor:e.bgColor,borderRadius:e.shape=="round"?"100px":"4px",borderColor:e.borderColor}])},[e.disabled?(d(),p("div",{key:0,class:s(o(l)("content__disabled"))},null,2)):y("",!0),r("input",{"confirm-type":"search",onBlur:T,value:o(a),onConfirm:z,onInput:V,disabled:e.disabled,onFocus:A,focus:e.focus,maxlength:e.maxlength,"placeholder-class":o(l)("content__input--placeholder"),placeholder:e.placeholder,"placeholder-style":`color: ${e.placeholderColor}`,class:s(o(l)("content__input")),type:"text",style:h([{textAlign:e.inputAlign,color:e.color,backgroundColor:"transparent",height:o(H)(e.height)},e.inputStyle])},null,46,M),o(a)&&e.clearabled&&o(c)?(d(),p("div",{key:1,class:s([o(l)("content__icon"),o(l)("content__close")]),onTap:m},[v(g,{type:"reject",color:"#ffffff",style:{"line-height":"12px"}})],34)):y("",!0),b(e.$slots,"prefix",{},()=>[r("div",{class:s(o(l)("content__icon"))},[v(g,{onTap:B,size:e.searchIconSize,type:"index-search",color:e.searchIconColor?e.searchIconColor:e.color},null,8,["size","color"])],2)],!0),b(e.$slots,"suffix",{},void 0,!0)],6),r("text",{style:h([e.actionStyle]),class:s(["uv-search__action",[(o(I)||o(i))&&"uv-search__action--active"]]),onTap:K(w,["stop","prevent"])},F(e.actionText),39)],2))}}),Q=D(U,[["__scopeId","data-v-434479ce"]]);export{Q as default};
