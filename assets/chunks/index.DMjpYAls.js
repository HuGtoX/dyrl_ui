import{_ as N}from"./index.vue_vue_type_style_index_0_lang.wdkJ4pUc.js";import F from"./index.DItzrnwf.js";import j from"./index.DRl9oU4h.js";import{i as z}from"./isEmpty.Ts5sY4Hd.js";import{d as H,s as p,v as y,D as L,o as r,b as h,w as k,j as v,I as C,c as m,E as g,n as $,t as B,F as V,e as T,k as b,R as O,_ as q}from"./framework.DZLrHpBd.js";import"./create.BCteNkO5.js";import"./format.B9x3PRfW.js";import"./Uint8Array.s5ylH1oV.js";import"./index.HvtGSUcZ.js";import"./index.DDh5KGTp.js";const A={class:"tabs__wrapper"},G={class:"tabs"},J=["onClick"],K={class:"swiper__wrapper"},M=["aria-checked","onClick"],P={name:"Cascade",options:{virtualHost:!0}},Q=H({...P,props:{show:{type:Boolean},modelValue:{},arrow:{type:Boolean},title:{},placeholder:{default:"请选择"},width:{},dataTree:{},icon:{default:"RightOutline"}},emits:["change","update:modelValue","update:show","finish"],setup(E,{emit:R}){const n=R,f=E,_=p(),S=p(),c=p(0),a=p([]),w=(e,l)=>{for(const o of e){if(o.value===l)return[o];if(o.children){const t=w(o.children,l);if(t)return[o,...t]}}},x=()=>{const{dataTree:e,modelValue:l}=f;if(l!==void 0){const o=w(e,l);if(o){let t=e;a.value=o.map(s=>{const i={options:t,selected:s},u=t.find(d=>d.value===s.value);return u&&(t=u.children),i}),t&&a.value.push({options:t,selected:null}),O(()=>{c.value=a.value.length-1});return}}a.value=[{options:e,selected:null}]},D=(e,l)=>{if(e.disabled)return;if(a.value[l].selected=e,a.value.length>l+1&&(a.value=a.value.slice(0,l+1)),e.children){const s={options:e.children,selected:null};a.value[l+1]?a.value[l+1]=s:a.value.push(s),O(()=>{c.value++})}const o=a.value.map(s=>s.selected).filter(Boolean);n("update:modelValue",e.value);const t={value:e.value,tabIndex:l,selectedOptions:o};n("change",t),e.children||n("finish",t)};return y(()=>f.dataTree,x,{immediate:!0,deep:!0}),y(()=>f.show,e=>{e?_.value.open():_.value.close()}),(e,l)=>{const o=L("scroll-view");return r(),h(j,{maskClick:()=>n("update:show",!1),bodyStyle:"height:60vh",ref_key:"drawerRef",ref:_,title:e.placeholder},{default:k(()=>[v("div",A,[C(o,{"scroll-x":""},{default:k(()=>[v("div",G,[(r(!0),m(V,null,g(a.value,(t,s)=>(r(),m("div",{class:$(["tab__item",{"tab__item--active":c.value===s}]),onClick:()=>c.value=s,key:s},B(t.selected?t.selected.text:"请选择"),11,J))),128))])]),_:1}),v("div",K,[C(o,{"scroll-y":""},{default:k(()=>{var t,s;return[(r(!0),m(V,null,g((t=a.value[c.value])==null?void 0:t.options,(i,u)=>{var d;return r(),m("div",{class:"list__item",key:u,"aria-checked":S.value,onClick:()=>D(i,c.value)},[v("span",null,B(i.text),1),((d=a.value[c.value].selected)==null?void 0:d.value)===i.value?(r(),h(N,{key:0,color:"#0173fc",type:"check"})):T("",!0)],8,M)}),128)),b(z)((s=a.value[c.value])==null?void 0:s.options)?(r(),h(b(F),{key:0,description:"暂无数据"})):T("",!0)]}),_:1})])])]),_:1},8,["maskClick","title"])}}}),le=q(Q,[["__scopeId","data-v-f8caea74"]]);export{le as default};
