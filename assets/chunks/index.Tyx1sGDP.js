import{s as P,g as W}from"./uniCommon.FOji9g2r.js";import{s as a,v as y,R as A}from"./framework.CTHohdEj.js";const O=Symbol("rl-tabs"),M=(r,b,L)=>{const f=a(0),l=a(0),h=a(0),m=a(0),o=a(0),i=a(!1),w=a(),c=a({left:0});y(r,()=>{A(()=>u())});const p=()=>{const e=r.value[l.value],t=r.value.slice(0,l.value).reduce((v,S)=>v+S.rect.width,0),n=uni.getSystemInfoSync().windowWidth;m.value=e.rect.width;let s=t-(c.value.width-e.rect.width)/2-(n-c.value.right)/2+c.value.left/2;s=Math.min(s,o.value-c.value.width),w.value=Math.max(0,s)},_=()=>new Promise(e=>{d("rl-tabs__wrapper__scroll-view").then(t=>e(t))}),g=()=>new Promise(e=>{const t=r.value.map((n,s)=>d(`rl-tabs__nav__item-${s}`));Promise.all(t).then(n=>e(n))}),R=()=>{const e=r.value[l.value];if(!e)return;const t=r.value.slice(0,l.value).reduce((s,v)=>s+v.rect.width,0),n=Number(b.value);f.value=t+(e.rect.width-n)/2,h.value=t,i.value&&setTimeout(()=>{i.value=!1},20)},u=()=>{!r.value||r.value.length===0||Promise.all([_(),g()]).then(([e,t=[]])=>{c.value=e,o.value=0,t.map((n,s)=>{o.value+=n.width,r.value[s].rect=n}),R(),p()})},T=()=>{P(200).then(()=>{console.log("tabs init"),u()})};function d(e){return new Promise(t=>{W(`.${e}`,L).then(n=>{t(n)})})}return{resize:u,lineOffsetLeft:f,innerCurrent:l,init:T,firstTime:i,scrollLeft:w,cardOffsetLeft:h,tabsItemWidth:m}};export{O as T,M as u};
